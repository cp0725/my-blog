webpackJsonp([4],{LqM4:function(s,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=t("7AJu"),c={data:function(){return{showState:"focus",focusMusicList:[],bannerMusicList:[],openMusic:{},musicTime:"",musicStopStatus:!1,lrc:[],showLrc:["","","","",""]}},created:function(){this.getMusicList()},mounted:function(){},methods:{getMusicList:function(){var s=this;console.log(1),this.myAjax.getMusicList({idx:a.a.musicType}).then(function(i){console.log(i,2),s.bannerMusicList=i.data,s.focusMusicList=i.data.concat(i.data.slice(0,4))}),console.log(3)},compress:function(){this.showState="focus"},showBanner:function(s){var i=this.openMusic.name||!1;this.openMusic=s,this.showState="banner",this.playMusic(i),this.setPosition(),console.log(this.openMusic)},setPosition:function(){this.openMusic.id!=this.bannerMusicList[2].id&&(this.after(),this.setPosition())},after:function(){this.bannerMusicList.push(this.bannerMusicList[0]),this.bannerMusicList=this.bannerMusicList.slice(1)},before:function(){this.bannerMusicList.unshift(this.bannerMusicList[this.bannerMusicList.length-1]),this.bannerMusicList=this.bannerMusicList.slice(0,this.bannerMusicList.length-1)},switchMusic:function(s){var i=this,t=void 0;this.bannerMusicList.map(function(s,a){s.id==i.openMusic.id&&(t=a)}),this.openMusic=this.bannerMusicList[t+s],this.playMusic()},bannerItenClick:function(s){if(s.id!=this.openMusic.id)return this.openMusic=s,void this.playMusic();s.id==this.openMusic.id&&this.musicStopStatus?this.playMusic():s.id!=this.openMusic.id||this.musicStopStatus||this.stopMusic()},stopMusic:function(){this.$refs.audio.pause(),this.musicStopStatus=!0},playMusic:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.$refs.audio.play(),this.musicStopStatus=!1)},updateTime:function(){var s=this.$refs.audio.duration-this.$refs.audio.currentTime,i=parseInt(s/60),t=parseInt(s%60),a=i+":"+(t<10?"0"+t:t);this.musicTime="NaN:NaN"==a?"":a,this.computedLrc()},getLrc:function(){var s=this;this.myAjax.getLrc({id:this.openMusic.id}).then(function(i){var t=i.lrc.lyric;console.log(t);var a=t.split("[");s.lrc=a.map(function(s){return{time:s.split("]")[0],secs:s.split("]")[0].split(".")[0],lrc:s.split("]")[1]}}),console.log(s.lrc)})},computedLrc:function(){var s=this,i=this.$refs.audio.currentTime,t=parseInt(i/60),a=parseInt(i%60),c=(t<10?"0"+t:t)+":"+(a<10?"0"+a:a);this.lrc.map(function(i,t){i.secs==c&&(s.showLrc.push(i.lrc),s.showLrc.push(s.lrc[t+1].lrc),s.showLrc.push(s.lrc[t+2].lrc),s.showLrc=s.showLrc.slice(s.showLrc.length>5?s.showLrc.length-5:0))})},compress2:function(){}},components:{},watch:{openMusic:function(){this.getLrc()}}},n={render:function(){var s=this,i=s.$createElement,t=s._self._c||i;return t("div",{staticClass:"music"},[t("transition",{attrs:{name:"focus"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"focus"==s.showState,expression:"showState == 'focus'"}],staticClass:"focus-wrap"},[t("ul",{staticClass:"item-wrap"},s._l(s.focusMusicList,function(i){return t("li",{class:{item:!0,now:s.openMusic.id===i.id},on:{click:function(t){s.showBanner(i)}}},[t("div",{staticClass:"img"},[t("img",{staticClass:"prc",class:{stop:s.musicStopStatus},attrs:{src:i.al.picUrl}}),s._v(" "),t("i",{staticClass:"fa fa-play-circle-o"}),s._v(" "),t("i",{staticClass:"fa fa-pause-circle-o"}),s._v(" "),t("i",{staticClass:"fa fa-music"})]),s._v(" "),t("div",{staticClass:"text"},[t("p",{staticClass:"name"},[s._v(s._s(i.name))]),s._v(" "),t("p",{staticClass:"author"},[s._v(s._s(i.ar.map(function(s){return s.name}).join("/")))])])])}))])]),s._v(" "),t("transition",{attrs:{name:"banner"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"banner"==s.showState,expression:"showState == 'banner'"}],staticClass:"banner-wrap"},[s.openMusic.al?t("img",{staticClass:"banner",attrs:{src:s.openMusic.al.picUrl}}):s._e(),s._v(" "),t("b",{staticClass:"mask"}),s._v(" "),t("i",{staticClass:"fa fa-compress",on:{click:s.compress}}),s._v(" "),t("div",{staticClass:"item-wrap"},[t("i",{staticClass:"fa fa-angle-up",on:{click:s.before}}),s._v(" "),t("i",{staticClass:"fa fa-angle-down",on:{click:s.after}}),s._v(" "),t("ul",s._l(s.bannerMusicList,function(i){return t("li",{class:{item:!0,now:s.openMusic.id===i.id},on:{click:function(t){s.bannerItenClick(i)}}},[t("div",{staticClass:"img"},[t("img",{staticClass:"prc",class:{stop:s.musicStopStatus},attrs:{src:i.al.picUrl}}),s._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:s.openMusic.id!=i.id||s.musicStopStatus,expression:"openMusic.id != item.id || musicStopStatus"}],staticClass:"fa fa-play-circle-o"}),s._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:s.openMusic.id==i.id&&!s.musicStopStatus,expression:"openMusic.id == item.id && !musicStopStatus"}],staticClass:"fa fa-pause-circle-o"}),s._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:s.openMusic.id===i.id,expression:"openMusic.id === item.id"}],staticClass:"fa fa-music"})]),s._v(" "),t("div",{staticClass:"text"},[t("p",{staticClass:"name"},[s._v(s._s(i.name))]),s._v(" "),t("p",{staticClass:"author"},[s._v(s._s(i.ar.map(function(s){return s.name}).join("/")))])])])}))]),s._v(" "),t("div",{staticClass:"music-ctrl"},[t("i",{staticClass:"fa fa-backward",on:{click:function(i){s.switchMusic(-1)}}}),s._v(" "),s.musicStopStatus?t("i",{staticClass:"fa fa-play-circle-o",on:{click:s.playMusic}}):t("i",{staticClass:"fa fa-pause-circle-o",on:{click:s.stopMusic}}),s._v(" "),t("i",{staticClass:"fa fa-forward",on:{click:function(i){s.switchMusic(1)}}})]),s._v(" "),s.openMusic.name?t("div",{staticClass:"lrc-wrap"},[t("div",{staticClass:"info"},[t("p",{staticClass:"name"},[s._v(s._s(s.openMusic.name))]),s._v(" "),t("p",{staticClass:"author"},[t("span",{staticClass:"tit"},[s._v("歌手")]),s._v(" "),t("span",[s._v(s._s(s.openMusic.ar.map(function(s){return s.name}).join("/")))]),s._v(" "),t("span",{staticClass:"time"},[s._v(s._s(s.musicTime))])])]),s._v(" "),t("div",{staticClass:"lrc"},s._l(s.showLrc,function(i,a){return t("p",{class:{now:2==a}},[s._v(s._s(i))])}))]):s._e()])]),s._v(" "),t("audio",{ref:"audio",attrs:{autoplay:"",loop:"",src:s.openMusic.musicUrl?s.openMusic.musicUrl.url:""},on:{timeupdate:s.updateTime}}),s._v(" "),t("div",{staticStyle:{"padding-top":"50px"},on:{click:s.compress2}},[s._v("\n    其他内容正在开发\n  ")])],1)},staticRenderFns:[]};var e={data:function(){return{}},created:function(){},mounted:function(){},methods:{},components:{music:t("VU/8")(c,n,!1,function(s){t("xacK")},"data-v-d852b57a",null).exports}},o={render:function(){var s=this.$createElement,i=this._self._c||s;return i("div",{staticClass:"home"},[i("music")],1)},staticRenderFns:[]};var u=t("VU/8")(e,o,!1,function(s){t("Nyob")},"data-v-03ceeb79",null);i.default=u.exports},Nyob:function(s,i){},xacK:function(s,i){}});
//# sourceMappingURL=4.e39bb30a9dca30a00d25.js.map